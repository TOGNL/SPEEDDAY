<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Progression de la condamnation</title>
  <style>
    :root{
      --bg:#ffffff;
      --fg:#111111;
      --muted:#6b7280;
      --accent:#800000;       /* bordeaux (style OSIRIS) */
      --accent-soft:#e8d6d6;  /* bordeaux clair très doux */
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100dvh; display:grid; place-items:center;
      background:var(--bg); color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
    }
    .card{
      width:min(680px,92vw);
      border:1px solid #e5e7eb; border-radius:var(--radius);
      padding:28px 24px; box-shadow:0 10px 30px rgba(0,0,0,.06);
      background:#fff;
    }
    h1{
      margin:0 0 6px; font-size:clamp(22px,3.8vw,28px);
      letter-spacing:.2px;
    }
    .range{
      margin:0 0 18px; color:var(--muted);
      font-size:clamp(13px,2.4vw,14px)
    }
    .bar-wrap{
      margin:14px 0 22px; height:14px; background:var(--accent-soft);
      border-radius:999px; overflow:hidden; border:1px solid #eadbdb;
    }
    .bar{height:100%; width:0%; background:var(--accent); transition:width .6s ease}
    .numbers{
      display:grid; gap:10px; font-size:clamp(18px,3.2vw,22px);
      line-height:1.3;
    }
    .muted{color:var(--muted); font-size:clamp(12px,2.2vw,13px)}
    .mono{font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1;}
    footer{margin-top:14px; color:var(--muted); font-size:12px}
  </style>
</head>
<body>
  <main class="card">
    <h1>Progression de la période</h1>
    <p class="range">Du <strong>5 octobre 2025</strong> au <strong>6 février 2026</strong></p>

    <div class="bar-wrap" aria-hidden="true"><div id="bar" class="bar"></div></div>

    <div class="numbers">
      <div id="daysLeft" class="mono">… jours restants.</div>
      <div id="pctDone" class="mono">…% déjà effectués.</div>
      <div class="muted" id="detail"></div>
    </div>

    <footer id="now"></footer>
  </main>

  <script>
    // Utilitaires jours (calculs en UTC pour éviter les décalages d'heure)
    const MS_DAY = 24 * 60 * 60 * 1000;
    const utcDate = (y, m, d) => new Date(Date.UTC(y, m - 1, d, 0, 0, 0, 0));

    // Bornes de la période
    const START = utcDate(2025, 10, 5);   // 5 octobre 2025
    const END   = utcDate(2026,  2, 6);   // 6 février 2026

    function clamp(v, min, max){ return Math.min(Math.max(v, min), max); }

    function daysBetween(a, b){
      // Différence entière en jours (UTC)
      return Math.round((b.getTime() - a.getTime()) / MS_DAY);
    }

    function compute(){
      // "Aujourd'hui" en UTC (au début de journée UTC)
      const now = new Date();
      const todayUTC = new Date(Date.UTC(
        now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()
      ));

      const totalDays = daysBetween(START, END);               // total (ici 124)
      const elapsedDaysRaw = daysBetween(START, todayUTC);     // écoulés (peut être <0 ou > total)
      const elapsedDays = clamp(elapsedDaysRaw, 0, totalDays);
      const remainingDays = clamp(daysBetween(todayUTC, END), 0, totalDays);

      const pct = totalDays > 0 ? (elapsedDays / totalDays) * 100 : 0;

      // Mise à jour UI
      const fmt = (n) => n.toLocaleString('fr-FR');
      document.getElementById('daysLeft').textContent = `${fmt(remainingDays)} jours restants.`;
      document.getElementById('pctDone').textContent  = `${pct.toFixed(1).replace('.', ',')}% déjà effectués.`;
      document.getElementById('bar').style.width = `${pct}%`;

      // Détail (optionnel)
      document.getElementById('detail').textContent =
        `Écoulés : ${fmt(elapsedDays)} j / Total : ${fmt(totalDays)} j`;

      // Horodatage (confort)
      try{
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'local';
        document.getElementById('now').textContent =
          `Calcul basé sur la date du jour (${tz}).`;
      }catch(_){
        document.getElementById('now').textContent = `Calcul basé sur la date du jour.`;
      }
    }

    compute();

    // Recalcule automatiquement juste après minuit (toutes les 10 minutes en sécurité)
    setInterval(compute, 10 * 60 * 1000);
  </script>
</body>
</html>
